- 课程：CS307数据库原理
- 学期：23秋
- 理论课教师：程然
- 实验课教师：王维语
- 实验课时间：星期二1-2节
## 团队基本信息
|成员|学号|百分比|贡献内容|
|-|-|-|-|
|何林翰|12212309|33%|内容1|
|许致韬|12211818|33%|内容2|
|董炳闻|12211111|33%|内容3|
## 任务1：E-R图
我们使用[draw.io](https://draw.io)绘制E-R图，如下。
![[E-R图.png]]

## 任务2：数据库设计
（数据库图表）
（简要描述表格和列的设计，包括但不限于表格和列的含义）
## 任务3：数据导入
我们编写、改进了……脚本来导入文件，文件附后
我们的脚本使用Bufferreader类导入数据，使用了……
以下是实体表中的记录数。

|user|video|comment|
|-|-|-|
|37881|7865|12478996|
我们尝试了以下导入数据的方法：
1. 1
2. 
## 任务4：比较DBMS与文件I/O
### 4.1 测试环境
#### 4.1.1 硬件规格
- **设备名称**：RedmiBook Pro 14 锐龙版
- **处理器**：AMD Ryzen 7 5700U with Radeon Graphics 1.80 GHz
- **机带RAM**：16.0 GB (15.3 GB 可用)
- **系统类型**：64 位操作系统, 基于 x64 的处理器
#### 4.1.2 软件规格
- **DBMS版本**：PostgreSQL 14.9
- **操作系统**：Windows 10 家庭中文版，版本号：22H2
##### 编程语言：Java
- **版本号**："19.0.1" 2022-10-18
- **IDE版本**：lntelliJ IDEA 2022.3.2
- **依赖的库及其版本**：
### 4.2 组织测试数据
#### 4.2.1 待测试的CSV文件的生成
在上述Java脚本中，我们使用OpenCSV库创建了一个CSV格式的测试数据文件，包含了1000000行和7列不同类型的数据。为确保数据的多样性和真实性，我们对每一列进行了详细的定制和随机生成。
1. **mid (长整型)**：我们使用`generateUniqueRandomNumber`方法生成了范围在1到2^32之间的1000000个唯一的长整型数字。这些数字作为mid列的数据，确保了每一行都有一个唯一的标识符。
2. **name (字符串)**：利用`generateRandomName`方法，我们生成了长度限制在16以内的中英文混合随机文本。这个方法随机选择`BILIBILI_NAME`和随机字符拼接（或仅有随机字符），从而创造出具有一定多样性且唯一的名字。
3. **sex (字符串)**：在预定义的字符串数组`{"男", "女", "保密"}`中随机选择一个值作为性别的数据。
4. **birthday (字符串)**：通过`generateRandomBirthday`方法，我们生成了格式为“xxxx年xx月xx日”的生日字符串，其中年份在1920到2023之间。注意到`users.csv`表中有约80%的空值，我们设置了20%的概率生成生日数据。
5. **level (整型)**：在1到6之间随机生成一个整数作为等级数据。
6. **sign (字符串)**：我们使用`generateRandomMixedText`方法生成了长度在1-255随机的中英文混合随机文本，用作个人简介的数据。
7. **identity (字符串)**：在预定义的字符串数组`{"user", "superuser"}`中，以10%的概率选择"superuser"，其余选择"user"，作为身份的数据。
这些数据被组织成CSV格式，每行代表一条记录，每列由逗号分隔。最终的CSV文件包括一个标题行和1000000个数据行，每行都有7个字段，对应于不同类型的测试数据。通过这种方式，我们能够生成一个结构清晰、格式统一、内容丰富的测试数据集，以便进行进一步的数据分析和处理。
#### 4.2.2 测试SQL语句
我们的使用的SQL语句覆盖了插入、删除、更新和选择的常见操作，并且包含了复杂度不同的查询，可以用来较为有效地测试文件IO与DBMS在处理不同类型操作时的性能差异。

### 4.3 描述测试脚本和源代码
- 提供测试SQL脚本和程序的源代码。
- 不要将整个脚本和程序复制粘贴到报告中，而是将源代码作为附件提交。

### 4.4 运行时间比较研究

- 使用图形、表格等数据可视化工具呈现运行时间的比较结果。
- 使用一致的样式和格式。
- 描述运行性能的主要差异，有趣之处，实验中发现的见解等。
## 总结

